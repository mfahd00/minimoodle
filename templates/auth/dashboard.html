{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% block content %}
<h2>Dashboard</h2>

{% if enrollments %}
  <div class="dashboard-grid">
    {% for enrollment in enrollments %}
      <div class="course-card">
        <h3>
          <a href="{% url 'course_detail' enrollment.course.id %}">
            {{ enrollment.course.title }}
          </a>
        </h3>

        {% if enrollment.course.category %}
          <p><strong>Category:</strong> {{ enrollment.course.category.name }}</p>
        {% else %}
          <p><strong>Category:</strong> Uncategorized</p>
        {% endif %}

        <p><strong>Instructor:</strong> {{ enrollment.course.created_by.username }}</p>

        <!-- Progress bar -->
        {% with progress_value=progress|get_item:enrollment.course.id %}
          <div class="progress-bar-container">
            <div class="progress-bar" style="width: {{ progress_value|default:0 }}%;"></div>
          </div>
          <p>{{ progress_value|default:0 }}% completed</p>
        {% endwith %}

        <a href="{% url 'course_detail' enrollment.course.id %}" class="btn">Go to Course</a>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>You have not enrolled in any courses yet.</p>
  <p><a href="{% url 'course_list' %}">Browse Courses</a></p>
{% endif %}

{% endblock %}
