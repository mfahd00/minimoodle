{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>All Courses</h2>

{% if page_obj %}
<div class="courses-grid">
  {% for course in page_obj %}
    <div class="course-card">
      <h3><a href="{% url 'course_detail' course.id %}">{{ course.title }}</a></h3>
      {% if course.category %}
        <p><strong>Category:</strong> {{ course.category.name }}</p>
      {% endif %}
      <p>{{ course.description|truncatewords:20 }}</p>
      <p><strong>Instructor:</strong> {{ course.created_by.username }}</p>
      <a href="{% url 'course_detail' course.id %}" class="btn btn-primary">View Course</a>
    </div>
  {% endfor %}
</div>

<div class="pagination">
  {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
  {% endif %}
  <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
  {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">Next</a>
  {% endif %}
</div>

{% else %}
  <p>No courses available.</p>
{% endif %}

{% endblock %}

{% block extra_css %}
<style>
.courses-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
}

.course-card {
  border: 1px solid #ddd;
  padding: 1rem;
  border-radius: 8px;
  background-color: #f9f9f9;
  transition: transform 0.2s ease;
}

.course-card:hover {
  transform: scale(1.02);
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.course-card h3 {
  margin-top: 0;
}

.btn {
  display: inline-block;
  margin-top: 0.5rem;
  padding: 0.4rem 0.8rem;
  background-color: #007bff;
  color: white;
  border-radius: 4px;
  text-decoration: none;
}

.btn:hover {
  background-color: #0056b3;
}
</style>
{% endblock %}
